<div class="search-container">
    <div class="search-header text-center mb-3">
        <h1 class="blog-title">Discover Amazing Content from Our Bloggers</h1>
    </div>

    <div class="search-wrapper">

        <!-- <div class="ai-badge">
            <span>AI Powered</span>
        </div> -->

        <mat-form-field class="search-field" appearance="outline">
            <mat-label>Find your perfect blog</mat-label>
            <input matInput (input)="onSearchInput($event)" (blur)="clearSearch()" (focus)="onSearchFocus()"
                placeholder="Search by title, author, or content..." #searchInput autocomplete="off">
        </mat-form-field>

        @if (isProcessingAI) {
        <div class="ai-processing">
            <div class="processing-dots">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
            <span class="processing-text">AI is analyzing your query...</span>
        </div>
        }

        <!-- Enhanced Search Suggestions Dropdown -->
        @if (showSuggestions && suggestions.length > 0 && !isProcessingAI) {
        <div class="suggestions-dropdown">
            <div class="suggestions-list">
                @for (suggestion of suggestions; track suggestion.id) {
                <div class="suggestion-item" matRipple [matRippleColor]="'rgba(102, 126, 234, 0.1)'">

                    <div class="suggestion-icon">
                        @if('title' in suggestion.target) {
                        <mat-icon class="title-icon">article</mat-icon>
                        } @else {
                        <mat-icon class="author-icon">person</mat-icon>
                        }
                    </div>

                    <div class="suggestion-content">
                        <div class="suggestion-text" [innerHTML]="suggestion.highlightedText || suggestion.text"></div>
                        <div class="suggestion-meta">
                            @if ('title' in suggestion.target) {
                            <span>üìù in "{{ suggestion.target.title }}" by {{ suggestion.target.author }}</span>
                            } @else {
                            <span>üë§ Author ‚Ä¢ {{ suggestion.target.postsCount || 0 }} posts</span>
                            }
                        </div>
                    </div>

                    <!-- Enhanced Stats -->
                    <div class="suggestion-stats">
                        <span class="likes">
                            @if ('likes' in suggestion.target) {
                            <mat-icon>favorite</mat-icon>
                            {{ suggestion.target.likes }}
                            } @else {
                            <mat-icon>group</mat-icon>
                            {{ suggestion.target.subscribers }}
                            }
                        </span>
                    </div>

                </div>
                }
            </div>
        </div>
        }

        <!-- Enhanced No Results with AI Suggestions -->
        @if (showSuggestions && suggestions.length === 0) {
        <div class="no-results">
            <div class="no-results-content">
                <div class="no-results-animation">
                    <mat-icon class="no-results-icon">search_off</mat-icon>
                </div>
                <h4>No blogs found</h4>
                <p>Our AI couldn't find matches for <strong>"{{ searchQuery }}"</strong></p>
            </div>
        </div>
        }

    </div>
</div>
<div class="search-container">
  <div class="search-header text-center mb-3">
    <h1 class="blog-title">Discover Amazing Content from Our Bloggers</h1>
  </div>

  <div class="search-wrapper">

    <mat-form-field class="search-field" appearance="outline">
      <mat-label>Find your perfect blog</mat-label>
      <input matInput (input)="onSearchInput($event)" placeholder="Search by title, author, or content..." #searchInput
        autocomplete="off">
    </mat-form-field>

    <!-- Enhanced Search Suggestions Dropdown -->
    @if (showSuggestions) {
    <div class="suggestions-dropdown">
      @if (suggestions$ | async; as suggestions) {
      @if (suggestions.users.length > 0 || suggestions.blogs.length > 0 ) {
      <div class="suggestions-list">

        @for (suggestion of suggestions.users; track suggestion.username) {
        <div class="suggestion-item" matRipple [matRippleColor]="'rgba(102, 126, 234, 0.1)'"
          (click)="navigate(`/blogger/${suggestion.username}`)">
          <div class="suggestion-icon">
            <mat-icon class="author-icon">person</mat-icon>
          </div>
          <div class="suggestion-content">
            <div class="suggestion-text" [innerHTML]="suggestion.username"></div>
            <div class="suggestion-meta">
              <span>üë§ Author ‚Ä¢ {{ suggestion.email }} </span>
            </div>
          </div>
          <div class="suggestion-stats">
            <span class="likes"><mat-icon>group</mat-icon>{{ suggestion.followers }}</span>
          </div>
        </div>
        }

        @for (suggestion of suggestions.blogs; track suggestion.id) {
        <div class="suggestion-item" matRipple [matRippleColor]="'rgba(102, 126, 234, 0.1)'"
          (click)="navigate(`/blog/${suggestion.id}`)">
          <div class="suggestion-icon">
            <mat-icon class="title-icon">article</mat-icon>
          </div>
          <div class="suggestion-content">
            <div class="suggestion-text" [innerHTML]="suggestion.description"></div>
            <div class="suggestion-meta">
              <span>üìù in "{{ suggestion.title }}" by {{ suggestion.authorName }}</span>
            </div>
          </div>
          <div class="suggestion-stats">
            <span class="likes"> <mat-icon>favorite</mat-icon> {{ suggestion.likes }}</span>
          </div>

        </div>
        }

      </div>
      } @else{
      <div class="no-results">
        <div class="no-results-content">
          <div class="no-results-animation">
            <mat-icon class="no-results-icon">search_off</mat-icon>
          </div>
          <h4>No blogs found</h4>
        </div>
      </div>
      }
      }
    </div>
    }
  </div>
</div>
